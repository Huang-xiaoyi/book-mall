{"version":3,"file":"js/222.795af261.js","mappings":"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","sources":["webpack://vue/./src/views/front/BookDetail.vue","webpack://vue/./src/components/Comment.vue","webpack://vue/src/components/Comment.vue","webpack://vue/./src/components/Comment.vue?3e47","webpack://vue/./src/components/Comment.vue?daa9","webpack://vue/src/views/front/BookDetail.vue","webpack://vue/./src/views/front/BookDetail.vue?ebe5","webpack://vue/./src/views/front/BookDetail.vue?7015"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"book-container\"},[_c('div',{staticClass:\"book-information\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"book-image-container\"},[_c('img',{staticClass:\"book-image\",attrs:{\"src\":_vm.book.pic}})])]),_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"book-name\"},[_vm._v(_vm._s(_vm.book.name))])]),_c('el-col',{attrs:{\"span\":6,\"offset\":4}},[_c('div',{staticClass:\"book-price\"},[_vm._v(\"￥\"+_vm._s(_vm.book.price))])]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"book-author\"},[_vm._v(_vm._s(_vm.book.author))])]),_c('el-col',{attrs:{\"span\":18}}),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"description-container\"},[_c('div',{class:['description-content', {expanded : _vm.isDescriptionExpanded}],attrs:{\"rel\":\"descriptionText\"}},[_vm._v(\" \"+_vm._s(_vm.book.detail)+\" \")]),(_vm.showReadMore)?_c('div',{staticClass:\"read-more-gradient\"}):_vm._e(),_c('div',{staticClass:\"read-more-container\"},[_c('span',{staticClass:\"read-more-btn\",on:{\"click\":_vm.toggleDescription}},[_vm._v(\" \"+_vm._s(_vm.isDescriptionExpanded ? '收起' : '查看更多')+\" \")])])])]),_vm._v(\"qia \"),_c('el-col',{attrs:{\"span\":18}}),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"purchase-number\"},[_c('el-input-number',{attrs:{\"min\":1,\"max\":_vm.book.stock,\"label\":\"描述文字\"},model:{value:(_vm.booknum),callback:function ($$v) {_vm.booknum=$$v},expression:\"booknum\"}}),_vm._v(\" 库存\"+_vm._s(_vm.book.stock)+\" \")],1)])],1),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6,\"offset\":6}},[_c('el-button',{attrs:{\"type\":\"warning\"}},[_vm._v(\"收藏\")]),_c('el-button',{attrs:{\"type\":\"danger\"}},[_vm._v(\"加入购物车\")])],1)],1)],1),_c('Comment',{attrs:{\"book-id\":_vm.book ? _vm.book.id : null}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"comment-container\"},[_c('div',{staticClass:\"comment-header\"},[_c('h3',[_vm._v(\"评论区\")]),_c('span',{staticClass:\"comment-count\"},[_vm._v(\"共 \"+_vm._s(_vm.comments.length)+\" 条评论\")])]),(_vm.isLoggedIn)?_c('div',{staticClass:\"comment-input-area\"},[_c('el-input',{staticClass:\"comment-input\",attrs:{\"type\":\"textarea\",\"rows\":3,\"placeholder\":\"写下你的评论...\"},model:{value:(_vm.newComment),callback:function ($$v) {_vm.newComment=$$v},expression:\"newComment\"}}),_c('div',{staticClass:\"comment-input-actions\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.submitting,\"disabled\":!_vm.newComment.trim()},on:{\"click\":_vm.submitComment}},[_vm._v(\" 发表评论 \")])],1)],1):_c('div',{staticClass:\"login-prompt\"},[_c('el-alert',{attrs:{\"title\":\"请先登录后再发表评论\",\"type\":\"info\",\"show-icon\":\"\",\"closable\":false}},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.goToLogin}},[_vm._v(\"去登录\")])],1)],1),_c('div',{staticClass:\"comment-list\"},[(_vm.comments.length === 0)?_c('div',{staticClass:\"no-comments\"},[_c('p',[_vm._v(\"暂无评论，快来发表第一条评论吧！\")])]):_c('div',{staticClass:\"comment-items\"},_vm._l((_vm.comments),function(comment){return _c('div',{key:comment.id,staticClass:\"comment-item\"},[_c('div',{staticClass:\"comment-avatar\"},[_c('el-avatar',{attrs:{\"src\":comment.userAvatar || _vm.defaultAvatar,\"size\":40}},[_vm._v(\" \"+_vm._s(comment.userName ? comment.userName.charAt(0).toUpperCase() : 'U')+\" \")])],1),_c('div',{staticClass:\"comment-content\"},[_c('div',{staticClass:\"comment-meta\"},[_c('span',{staticClass:\"comment-author\"},[_vm._v(_vm._s(comment.userName || '匿名用户'))]),_c('span',{staticClass:\"comment-time\"},[_vm._v(_vm._s(_vm.formatTime(comment.createTime)))])]),_c('div',{staticClass:\"comment-text\"},[_vm._v(\" \"+_vm._s(comment.content)+\" \")]),_c('div',{staticClass:\"comment-actions\"},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.replyToComment(comment)}}},[_vm._v(\" 回复 \")])],1),(_vm.replyingTo === comment.id)?_c('div',{staticClass:\"reply-input-area\"},[_c('el-input',{staticClass:\"reply-input\",attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":`回复 ${comment.userName || '匿名用户'}：`},model:{value:(_vm.replyContent),callback:function ($$v) {_vm.replyContent=$$v},expression:\"replyContent\"}}),_c('div',{staticClass:\"reply-actions\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"loading\":_vm.submitting,\"disabled\":!_vm.replyContent.trim()},on:{\"click\":function($event){return _vm.submitReply(comment)}}},[_vm._v(\" 回复 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":_vm.cancelReply}},[_vm._v(\" 取消 \")])],1)],1):_vm._e(),(comment.replies && comment.replies.length > 0)?_c('div',{staticClass:\"replies-list\"},_vm._l((comment.replies),function(reply){return _c('div',{key:reply.id,staticClass:\"reply-item\"},[_c('div',{staticClass:\"reply-avatar\"},[_c('el-avatar',{attrs:{\"src\":reply.userAvatar || _vm.defaultAvatar,\"size\":30}},[_vm._v(\" \"+_vm._s(reply.userName ? reply.userName.charAt(0).toUpperCase() : 'U')+\" \")])],1),_c('div',{staticClass:\"reply-content\"},[_c('div',{staticClass:\"reply-meta\"},[_c('span',{staticClass:\"reply-author\"},[_vm._v(_vm._s(reply.userName || '匿名用户'))]),_c('span',{staticClass:\"reply-time\"},[_vm._v(_vm._s(_vm.formatTime(reply.createTime)))])]),_c('div',{staticClass:\"reply-text\"},[_c('span',{staticClass:\"reply-to\"},[_vm._v(\"回复 \"+_vm._s(reply.parentUserName || '匿名用户')+\"：\")]),_vm._v(\" \"+_vm._s(reply.content)+\" \")])])])}),0):_vm._e()])])}),0)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"comment-container\">\r\n    <div class=\"comment-header\">\r\n      <h3>评论区</h3>\r\n      <span class=\"comment-count\">共 {{ comments.length }} 条评论</span>\r\n    </div>\r\n\r\n    <!-- 评论输入区域 -->\r\n    <div class=\"comment-input-area\" v-if=\"isLoggedIn\">\r\n      <el-input\r\n        v-model=\"newComment\"\r\n        type=\"textarea\"\r\n        :rows=\"3\"\r\n        placeholder=\"写下你的评论...\"\r\n        class=\"comment-input\"\r\n      />\r\n      <div class=\"comment-input-actions\">\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"submitComment\"\r\n          :loading=\"submitting\"\r\n          :disabled=\"!newComment.trim()\"\r\n        >\r\n          发表评论\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 未登录提示 -->\r\n    <div class=\"login-prompt\" v-else>\r\n      <el-alert\r\n        title=\"请先登录后再发表评论\"\r\n        type=\"info\"\r\n        show-icon\r\n        :closable=\"false\"\r\n      >\r\n        <el-button type=\"text\" @click=\"goToLogin\">去登录</el-button>\r\n      </el-alert>\r\n    </div>\r\n\r\n    <!-- 评论列表 -->\r\n    <div class=\"comment-list\">\r\n      <div v-if=\"comments.length === 0\" class=\"no-comments\">\r\n        <p>暂无评论，快来发表第一条评论吧！</p>\r\n      </div>\r\n\r\n      <div v-else class=\"comment-items\">\r\n        <div\r\n          v-for=\"comment in comments\"\r\n          :key=\"comment.id\"\r\n          class=\"comment-item\"\r\n        >\r\n          <div class=\"comment-avatar\">\r\n            <el-avatar\r\n              :src=\"comment.userAvatar || defaultAvatar\"\r\n              :size=\"40\"\r\n            >\r\n              {{ comment.userName ? comment.userName.charAt(0).toUpperCase() : 'U' }}\r\n            </el-avatar>\r\n          </div>\r\n\r\n          <div class=\"comment-content\">\r\n            <div class=\"comment-meta\">\r\n              <span class=\"comment-author\">{{ comment.userName || '匿名用户' }}</span>\r\n              <span class=\"comment-time\">{{ formatTime(comment.createTime) }}</span>\r\n            </div>\r\n\r\n            <div class=\"comment-text\">\r\n              {{ comment.content }}\r\n            </div>\r\n\r\n            <div class=\"comment-actions\">\r\n              <el-button\r\n                type=\"text\"\r\n                size=\"small\"\r\n                @click=\"replyToComment(comment)\"\r\n              >\r\n                回复\r\n              </el-button>\r\n            </div>\r\n\r\n            <!-- 回复输入框 -->\r\n            <div v-if=\"replyingTo === comment.id\" class=\"reply-input-area\">\r\n              <el-input\r\n                v-model=\"replyContent\"\r\n                type=\"textarea\"\r\n                :rows=\"2\"\r\n                :placeholder=\"`回复 ${comment.userName || '匿名用户'}：`\"\r\n                class=\"reply-input\"\r\n              />\r\n              <div class=\"reply-actions\">\r\n                <el-button\r\n                  type=\"primary\"\r\n                  size=\"small\"\r\n                  @click=\"submitReply(comment)\"\r\n                  :loading=\"submitting\"\r\n                  :disabled=\"!replyContent.trim()\"\r\n                >\r\n                  回复\r\n                </el-button>\r\n                <el-button\r\n                  type=\"text\"\r\n                  size=\"small\"\r\n                  @click=\"cancelReply\"\r\n                >\r\n                  取消\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 子评论回复列表 -->\r\n            <div v-if=\"comment.replies && comment.replies.length > 0\" class=\"replies-list\">\r\n              <div\r\n                v-for=\"reply in comment.replies\"\r\n                :key=\"reply.id\"\r\n                class=\"reply-item\"\r\n              >\r\n                <div class=\"reply-avatar\">\r\n                  <el-avatar\r\n                    :src=\"reply.userAvatar || defaultAvatar\"\r\n                    :size=\"30\"\r\n                  >\r\n                    {{ reply.userName ? reply.userName.charAt(0).toUpperCase() : 'U' }}\r\n                  </el-avatar>\r\n                </div>\r\n\r\n                <div class=\"reply-content\">\r\n                  <div class=\"reply-meta\">\r\n                    <span class=\"reply-author\">{{ reply.userName || '匿名用户' }}</span>\r\n                    <span class=\"reply-time\">{{ formatTime(reply.createTime) }}</span>\r\n                  </div>\r\n\r\n                  <div class=\"reply-text\">\r\n                    <span class=\"reply-to\">回复 {{ reply.parentUserName || '匿名用户' }}：</span>\r\n                    {{ reply.content }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request'\r\n\r\nexport default {\r\n  name: 'Comment',\r\n  props: {\r\n    bookId: {\r\n      type: [Number, String],\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      comments: [],\r\n      newComment: '',\r\n      replyContent: '',\r\n      replyingTo: null,\r\n      submitting: false,\r\n      loading: false,\r\n      defaultAvatar: 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png',\r\n      userInfo: null\r\n    }\r\n  },\r\n  computed: {\r\n    isLoggedIn() {\r\n      return this.userInfo && this.userInfo.id\r\n    }\r\n  },\r\n  created() {\r\n    this.userInfo = JSON.parse(localStorage.getItem('userInfo') || '{}')\r\n    this.loadComments()\r\n  },\r\n  methods: {\r\n    async loadComments() {\r\n      try {\r\n        this.loading = true\r\n        // 模拟评论数据，实际项目中应该调用后端API\r\n        this.comments = this.getMockComments()\r\n      } catch (error) {\r\n        console.error('加载评论失败:', error)\r\n        this.$message.error('加载评论失败')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async submitComment() {\r\n      if (!this.newComment.trim()) return\r\n\r\n      try {\r\n        this.submitting = true\r\n\r\n        // 模拟API调用，实际项目中应该调用后端API\r\n        const newCommentObj = {\r\n          id: Date.now(),\r\n          bookId: this.bookId,\r\n          userId: this.userInfo.id,\r\n          userName: this.userInfo.name || this.userInfo.username,\r\n          userAvatar: this.userInfo.avatar,\r\n          content: this.newComment.trim(),\r\n          createTime: new Date(),\r\n          parentId: null,\r\n          replies: []\r\n        }\r\n\r\n        this.comments.unshift(newCommentObj)\r\n        this.newComment = ''\r\n\r\n        this.$message.success('评论发表成功')\r\n      } catch (error) {\r\n        console.error('发表评论失败:', error)\r\n        this.$message.error('发表评论失败')\r\n      } finally {\r\n        this.submitting = false\r\n      }\r\n    },\r\n\r\n    replyToComment(comment) {\r\n      this.replyingTo = comment.id\r\n      this.replyContent = ''\r\n    },\r\n\r\n    cancelReply() {\r\n      this.replyingTo = null\r\n      this.replyContent = ''\r\n    },\r\n\r\n    async submitReply(parentComment) {\r\n      if (!this.replyContent.trim()) return\r\n\r\n      try {\r\n        this.submitting = true\r\n\r\n        // 模拟API调用，实际项目中应该调用后端API\r\n        const newReply = {\r\n          id: Date.now(),\r\n          bookId: this.bookId,\r\n          userId: this.userInfo.id,\r\n          userName: this.userInfo.name || this.userInfo.username,\r\n          userAvatar: this.userInfo.avatar,\r\n          content: this.replyContent.trim(),\r\n          createTime: new Date(),\r\n          parentId: parentComment.id,\r\n          parentUserName: parentComment.userName || '匿名用户'\r\n        }\r\n\r\n        if (!parentComment.replies) {\r\n          this.$set(parentComment, 'replies', [])\r\n        }\r\n        parentComment.replies.push(newReply)\r\n\r\n        this.replyContent = ''\r\n        this.replyingTo = null\r\n\r\n        this.$message.success('回复成功')\r\n      } catch (error) {\r\n        console.error('回复失败:', error)\r\n        this.$message.error('回复失败')\r\n      } finally {\r\n        this.submitting = false\r\n      }\r\n    },\r\n\r\n    goToLogin() {\r\n      this.$router.push('/login')\r\n    },\r\n\r\n    formatTime(time) {\r\n      if (!time) return ''\r\n\r\n      const date = new Date(time)\r\n      const now = new Date()\r\n      const diff = now - date\r\n\r\n      if (diff < 60000) {\r\n        return '刚刚'\r\n      } else if (diff < 3600000) {\r\n        return Math.floor(diff / 60000) + '分钟前'\r\n      } else if (diff < 86400000) {\r\n        return Math.floor(diff / 3600000) + '小时前'\r\n      } else if (diff < 2592000000) {\r\n        return Math.floor(diff / 86400000) + '天前'\r\n      } else {\r\n        return date.toLocaleDateString()\r\n      }\r\n    },\r\n\r\n    // 模拟评论数据，实际项目中应该从后端获取\r\n    getMockComments() {\r\n      return [\r\n        {\r\n          id: 1,\r\n          bookId: this.bookId,\r\n          userId: 1,\r\n          userName: '番茄',\r\n          userAvatar: 'http://localhost:9090/files/1741934276948-1.png',\r\n          content: '这本书非常精彩，内容丰富，值得一读！作者的写作风格很独特，故事情节引人入胜。',\r\n          createTime: new Date(Date.now() - 86400000), // 1天前\r\n          parentId: null,\r\n          replies: [\r\n            {\r\n              id: 2,\r\n              bookId: this.bookId,\r\n              userId: 2,\r\n              userName: '番茄你个西红柿',\r\n              userAvatar: 'http://localhost:9090/files/1751524617169-3.jpg',\r\n              content: '我也觉得很不错，特别是其中的推理部分，让人意想不到。',\r\n              createTime: new Date(Date.now() - 43200000), // 12小时前\r\n              parentId: 1,\r\n              parentUserName: '番茄'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: 3,\r\n          bookId: this.bookId,\r\n          userId: 2,\r\n          userName: '番茄你个西红柿',\r\n          userAvatar: 'http://localhost:9090/files/1751524617169-3.jpg',\r\n          content: '推荐大家购买，性价比很高。印刷质量也很好，读起来很舒服。',\r\n          createTime: new Date(Date.now() - 172800000), // 2天前\r\n          parentId: null,\r\n          replies: []\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.comment-container {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.comment-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  padding-bottom: 15px;\r\n  border-bottom: 1px solid #ebeef5;\r\n}\r\n\r\n.comment-header h3 {\r\n  margin: 0;\r\n  color: #303133;\r\n  font-size: 18px;\r\n}\r\n\r\n.comment-count {\r\n  color: #909399;\r\n  font-size: 14px;\r\n}\r\n\r\n.comment-input-area {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.comment-input {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.comment-input-actions {\r\n  text-align: right;\r\n}\r\n\r\n.login-prompt {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.login-prompt .el-button {\r\n  margin-left: 10px;\r\n}\r\n\r\n.comment-list {\r\n  margin-top: 20px;\r\n}\r\n\r\n.no-comments {\r\n  text-align: center;\r\n  padding: 40px;\r\n  color: #909399;\r\n  background: #fafafa;\r\n  border-radius: 4px;\r\n}\r\n\r\n.comment-items {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.comment-item {\r\n  display: flex;\r\n  gap: 15px;\r\n  padding: 15px;\r\n  background: #fafafa;\r\n  border-radius: 8px;\r\n  border: 1px solid #ebeef5;\r\n}\r\n\r\n.comment-avatar {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.comment-content {\r\n  flex: 1;\r\n}\r\n\r\n.comment-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.comment-author {\r\n  font-weight: 600;\r\n  color: #303133;\r\n}\r\n\r\n.comment-time {\r\n  color: #909399;\r\n  font-size: 12px;\r\n}\r\n\r\n.comment-text {\r\n  color: #606266;\r\n  line-height: 1.6;\r\n  margin-bottom: 10px;\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n}\r\n\r\n.comment-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.reply-input-area {\r\n  margin-top: 15px;\r\n  padding: 15px;\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  border: 1px solid #dcdfe6;\r\n}\r\n\r\n.reply-input {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.reply-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.replies-list {\r\n  margin-top: 15px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.reply-item {\r\n  display: flex;\r\n  gap: 10px;\r\n  padding: 10px;\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  border: 1px solid #ebeef5;\r\n}\r\n\r\n.reply-avatar {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.reply-content {\r\n  flex: 1;\r\n}\r\n\r\n.reply-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.reply-author {\r\n  font-weight: 500;\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n\r\n.reply-time {\r\n  color: #c0c4cc;\r\n  font-size: 11px;\r\n}\r\n\r\n.reply-text {\r\n  color: #606266;\r\n  line-height: 1.5;\r\n  font-size: 14px;\r\n}\r\n\r\n.reply-to {\r\n  color: #409eff;\r\n  font-weight: 500;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .comment-container {\r\n    padding: 15px;\r\n  }\r\n\r\n  .comment-item {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .comment-avatar {\r\n    align-self: flex-start;\r\n  }\r\n\r\n  .reply-item {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .reply-avatar {\r\n    align-self: flex-start;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Comment.vue?vue&type=template&id=9674866c&scoped=true\"\nimport script from \"./Comment.vue?vue&type=script&lang=js\"\nexport * from \"./Comment.vue?vue&type=script&lang=js\"\nimport style0 from \"./Comment.vue?vue&type=style&index=0&id=9674866c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9674866c\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n<div class=\"book-container\">\r\n  <div class=\"book-information\">\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"6\">\r\n        <div class=\"book-image-container\">\r\n          <img :src=\"book.pic\" class=\"book-image\">\r\n<!--          固定高度，使用flex布局使得图片在区域内水平居中\r\nobject-fit: contain保持图片比例不拉伸-->\r\n        </div>\r\n      </el-col>\r\n      <el-col :span=\"8\"><div class=\"book-name\">{{book.name}}</div></el-col>\r\n      <el-col :span=\"6\" :offset=\"4\"><div class=\"book-price\">￥{{book.price}}</div></el-col>\r\n      <el-col :span=\"6\"><div class=\"book-author\">{{book.author}}</div></el-col>\r\n      <el-col :span=\"18\"></el-col>\r\n<!--      为了让组件能够打破行24列排列的限制，选择制作空组件填充空隙-->\r\n      <el-col :span=\"6\"><div class=\"description-container\">\r\n        <div :class=\"['description-content', {expanded : isDescriptionExpanded}]\"\r\n             rel=\"descriptionText\">\r\n          {{book.detail}}\r\n        </div>\r\n        <div v-if=\"showReadMore\" class=\"read-more-gradient\"></div>\r\n        <div class=\"read-more-container\">\r\n          <span class=\"read-more-btn\" @click=\"toggleDescription\">\r\n            {{ isDescriptionExpanded ? '收起' : '查看更多' }}\r\n          </span>\r\n        </div>\r\n      </div></el-col>qia\r\n      <el-col :span=\"18\"></el-col>\r\n      <el-col :span=\"6\"><div class=\"purchase-number\">\r\n        <el-input-number v-model=\"booknum\" :min=\"1\" :max=\"book.stock\" label=\"描述文字\"></el-input-number>\r\n        库存{{book.stock}}\r\n      </div></el-col>\r\n    </el-row>\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"6\" :offset=\"6\"><el-button type=\"warning\">收藏</el-button>\r\n        <el-button type=\"danger\">加入购物车</el-button>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n\r\n  <!-- 评论区 -->\r\n  <Comment :book-id=\"book ? book.id : null\" />\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Comment from '@/components/Comment.vue'\r\n\r\nexport default {\r\n  name: \"BookDetail\",\r\n  components: {\r\n    Comment\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      booknum: 0,\r\n      bookStr: \"\",\r\n      book: null,\r\n      loading: false,\r\n      isDescriptionExpanded: false,\r\n      showReadMore: false,\r\n      error: null\r\n    }\r\n  },\r\n  created() {\r\n    this.bookStr = this.$route.query.book;\r\n    if(this.bookStr){\r\n      try{\r\n        this.book = JSON.parse(this.bookStr);\r\n        return;\r\n      }catch (e) {\r\n        console.error(\"无效的图书数据\", e);\r\n      }\r\n    }\r\n    // 字符串丢失时发出请求重新加载数据，当前后端业务层还没写\r\n    this.loadBookDetail();\r\n  },\r\n  // 当DOM加载完毕后会立刻执行这里的代码\r\n  mounted(){\r\n    this.checkDescriptionOverflow();\r\n  },\r\n  methods: {\r\n    loadBookDetail() {\r\n      const bookId = this.$route.query.id;\r\n      if (!bookId) {\r\n        this.error = '图书ID不存在';\r\n        return;\r\n      }\r\n\r\n      this.loading = true;\r\n      this.error = null;\r\n\r\n      request.get(`/book/selectById?id=${bookId}`)\r\n        .then(res => {\r\n          if (res.code === '0') {\r\n            this.book = res.data;\r\n          } else {\r\n            this.error = res.msg || '获取图书信息失败';\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.error = '请求出错，请稍后重试';\r\n          console.error('Error fetching book detail:', err);\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    checkDescriptionOverflow() {\r\n      const textEl = this.$refs.descriptionText;\r\n      if (textEl) {\r\n        this.showReadMore = textEl.scrollHeight > textEl.clientHeight && !this.isDescriptionExpanded;\r\n      }\r\n    },\r\n    toggleDescription() {\r\n      this.isDescriptionExpanded = !this.isDescriptionExpanded;\r\n      this.$nextTick(() => {\r\n        this.checkDescriptionOverflow();\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.book-container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n.book-information {\r\n  background: #fff;\r\n  padding: 20px;\r\n  border-radius: 4px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,.1);\r\n}\r\n.grid-content {\r\n  border-radius: 4px;\r\n  min-height: 36px;\r\n}\r\n\r\n.book-image-container {\r\n  height: 300px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.book-image {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  object-fit: contain;\r\n}\r\n.book-name{\r\n  font-family: 幼圆;\r\n  font-size: 19px;\r\n}\r\n.book-price{\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: red;\r\n}\r\n.book-author{\r\n  font-style: italic;\r\n}\r\n.purchase-number{\r\n  display: flex;\r\n  justify-content: center;\r\n  color: #8c939d;\r\n  font-size: 12px;\r\n}\r\n\r\n.el-row {\r\n  margin-bottom: 20px;\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n.el-col {\r\n  border-radius: 4px;\r\n}\r\n.bg-purple-dark {\r\n  background: #99a9bf;\r\n}\r\n.bg-purple {\r\n  background: #d3dce6;\r\n}\r\n.bg-purple-light {\r\n  background: #e5e9f2;\r\n}\r\n\r\n.row-bg {\r\n  padding: 10px 0;\r\n  background-color: #f9fafc;\r\n}\r\n.description-container {\r\n  position: relative;\r\n  margin: 15px 0;\r\n}\r\n\r\n.description-content {\r\n  font-size: 14px;\r\n  color: #8c939d;\r\n  line-height: 1.5;\r\n  overflow: hidden;\r\n  max-height: 120px;\r\n  transition: max-height 0.3s ease;\r\n}\r\n\r\n.description-content.expanded {\r\n  max-height: none;\r\n}\r\n\r\n.read-more-gradient {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 50px;\r\n  background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,1));\r\n}\r\n\r\n.read-more-container {\r\n  text-align: center;\r\n  margin-top: 10px;\r\n}\r\n\r\n.read-more-btn {\r\n  color: #409EFF;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n}\r\n\r\n.read-more-btn:hover {\r\n  text-decoration: underline;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BookDetail.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BookDetail.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./BookDetail.vue?vue&type=template&id=acb1ea4e&scoped=true\"\nimport script from \"./BookDetail.vue?vue&type=script&lang=js\"\nexport * from \"./BookDetail.vue?vue&type=script&lang=js\"\nimport style0 from \"./BookDetail.vue?vue&type=style&index=0&id=acb1ea4e&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"acb1ea4e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","book","pic","_v","_s","name","price","author","class","expanded","isDescriptionExpanded","detail","showReadMore","_e","on","toggleDescription","stock","model","value","booknum","callback","$$v","expression","id","staticRenderFns","comments","length","isLoggedIn","newComment","submitting","trim","submitComment","goToLogin","_l","comment","key","userAvatar","defaultAvatar","userName","charAt","toUpperCase","formatTime","createTime","content","$event","replyToComment","replyingTo","replyContent","submitReply","cancelReply","replies","reply","parentUserName","props","bookId","type","Number","String","required","data","loading","userInfo","computed","created","JSON","parse","localStorage","getItem","loadComments","methods","getMockComments","error","console","$message","newCommentObj","Date","now","userId","username","avatar","parentId","unshift","success","parentComment","newReply","$set","push","$router","time","date","diff","Math","floor","toLocaleDateString","component","components","Comment","bookStr","$route","query","e","loadBookDetail","mounted","checkDescriptionOverflow","request","get","then","res","code","msg","catch","err","finally","textEl","$refs","descriptionText","scrollHeight","clientHeight","$nextTick"],"sourceRoot":""}