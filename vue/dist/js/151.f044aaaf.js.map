{"version":3,"file":"js/151.f044aaaf.js","mappings":"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","sources":["webpack://vue/./src/views/front/Book.vue","webpack://vue/src/views/front/Book.vue","webpack://vue/./src/views/front/Book.vue?ef99","webpack://vue/./src/views/front/Book.vue?1799"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"book-container\"},[_c('div',{staticClass:\"search-section\"},[_c('div',{staticClass:\"search-box\"},[_c('el-input',{staticClass:\"search-input\",attrs:{\"placeholder\":\"搜索图书...\",\"suffix-icon\":\"el-icon-search\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.searchBooks.apply(null, arguments)}},model:{value:(_vm.searchQuery),callback:function ($$v) {_vm.searchQuery=$$v},expression:\"searchQuery\"}}),_c('el-button',{staticClass:\"search-button\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.searchBooks}},[_vm._v(\"搜索\")])],1),_c('div',{staticClass:\"filter-section\"},[_c('div',{staticClass:\"filter-title\"},[_vm._v(\"分类筛选:\")]),_c('div',{staticClass:\"filter-tags\"},[_vm._l((_vm.typeData),function(type){return _c('el-tag',{key:type.id,staticClass:\"filter-tag\",attrs:{\"type\":_vm.selectedType === type.id ? 'primary' : ''},on:{\"click\":function($event){return _vm.filterByType(type.id)}}},[_vm._v(\" \"+_vm._s(type.name)+\" \")])}),_c('el-tag',{staticClass:\"filter-tag\",attrs:{\"type\":_vm.selectedType === null ? 'primary' : ''},on:{\"click\":function($event){return _vm.filterByType(null)}}},[_vm._v(\" 全部 \")])],2)])]),_c('div',{staticClass:\"book-list\"},[(_vm.bookData.length === 0)?_c('div',{staticClass:\"no-data\"},[_vm._v(\" 暂无图书数据 \")]):_c('div',{staticClass:\"book-grid\"},_vm._l((_vm.bookData),function(book){return _c('div',{key:book.id,staticClass:\"book-card\",on:{\"click\":function($event){return _vm.viewBookDetail(book)}}},[_c('div',{staticClass:\"book-cover\"},[_c('img',{staticClass:\"cover-img\",attrs:{\"src\":book.pic || _vm.defaultCover,\"alt\":book.name}})]),_c('div',{staticClass:\"book-info\"},[_c('div',{staticClass:\"book-title\"},[_vm._v(_vm._s(book.name))]),_c('div',{staticClass:\"book-author\"},[_vm._v(_vm._s(book.author))]),_c('div',{staticClass:\"book-publisher\"},[_vm._v(_vm._s(book.publisher))]),_c('div',{staticClass:\"book-price\"},[_vm._v(\"¥\"+_vm._s(book.price))])])])}),0)]),(_vm.total > 0)?_c('div',{staticClass:\"pagination-section\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.pageNum,\"page-size\":_vm.pageSize,\"layout\":\"prev, pager, next, jumper\",\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange}})],1):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"book-container\">\r\n    <!-- 搜索区域 -->\r\n    <div class=\"search-section\">\r\n      <div class=\"search-box\">\r\n        <el-input\r\n          class=\"search-input\"\r\n          v-model=\"searchQuery\"\r\n          placeholder=\"搜索图书...\"\r\n          suffix-icon=\"el-icon-search\"\r\n          @keyup.enter.native=\"searchBooks\">\r\n        </el-input>\r\n<!--        suffix-icon 框尾部图标，keyup.enter.native回车键触发，当组件是html原生组件时不需要.native-->\r\n        <el-button type=\"primary\" class=\"search-button\" @click=\"searchBooks\">搜索</el-button>\r\n      </div>\r\n\r\n      <!-- 分类筛选 -->\r\n      <div class=\"filter-section\">\r\n        <div class=\"filter-title\">分类筛选:</div>\r\n        <div class=\"filter-tags\">\r\n          <el-tag\r\n            v-for=\"type in typeData\"\r\n            :key=\"type.id\"\r\n            :type=\"selectedType === type.id ? 'primary' : ''\"\r\n            @click=\"filterByType(type.id)\"\r\n            class=\"filter-tag\">\r\n            {{ type.name }}\r\n          </el-tag>\r\n          <el-tag\r\n            @click=\"filterByType(null)\"\r\n            :type=\"selectedType === null ? 'primary' : ''\"\r\n            class=\"filter-tag\">\r\n            全部\r\n          </el-tag>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 图书列表 -->\r\n    <div class=\"book-list\">\r\n      <div v-if=\"bookData.length === 0\" class=\"no-data\">\r\n        暂无图书数据\r\n      </div>\r\n\r\n      <div v-else class=\"book-grid\">\r\n        <div\r\n          v-for=\"book in bookData\"\r\n          :key=\"book.id\"\r\n          class=\"book-card\"\r\n          @click=\"viewBookDetail(book)\">\r\n          <div class=\"book-cover\">\r\n            <img :src=\"book.pic || defaultCover\" :alt=\"book.name\" class=\"cover-img\">\r\n          </div>\r\n          <div class=\"book-info\">\r\n            <div class=\"book-title\">{{ book.name }}</div>\r\n            <div class=\"book-author\">{{ book.author }}</div>\r\n            <div class=\"book-publisher\">{{ book.publisher }}</div>\r\n            <div class=\"book-price\">¥{{ book.price }}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 分页 -->\r\n    <div class=\"pagination-section\" v-if=\"total > 0\">\r\n      <el-pagination\r\n        background\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pageNum\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"prev, pager, next, jumper\"\r\n        :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      bookData: [],\r\n      typeData: [],\r\n      searchQuery: '',\r\n      selectedType: null,\r\n      pageNum: 1,\r\n      pageSize: 20,\r\n      total: 0,\r\n      defaultCover: require('@/assets/img/carousel_2.png')\r\n    }\r\n  },\r\n  created() {\r\n    this.loadData();\r\n    this.loadTypeData();\r\n  },\r\n  methods: {\r\n    loadData() {\r\n      request.get('/book/selectPage', {\r\n        params: {\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          name: this.searchQuery,\r\n          typeId: this.selectedType\r\n        }\r\n      }).then(res => {\r\n        if (res.code === '0') {\r\n          this.bookData = res.data.list;\r\n          this.total = res.data.total;\r\n        } else {\r\n          this.$message.error(res.msg);\r\n        }\r\n      });\r\n    },\r\n\r\n    loadTypeData() {\r\n      request.get('/type/selectAll').then(res => {\r\n        if (res.code === '0') {\r\n          this.typeData = res.data;\r\n        } else {\r\n          this.$message.error(res.msg);\r\n        }\r\n      });\r\n    },\r\n\r\n    searchBooks() {\r\n      request.get('/book/search', {\r\n        params:{\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          name: this.searchQuery,\r\n        }\r\n      }).then(res =>{\r\n        if (res.code === '0') {\r\n          this.bookData = res.data.list;\r\n          this.total = res.data.total;\r\n        } else {\r\n          this.$message.error(res.msg);\r\n        }\r\n      });\r\n    },\r\n\r\n    filterByType(typeId) {\r\n      this.selectedType = typeId;\r\n      this.pageNum = 1;\r\n      request.get('/book/filterPage', {\r\n        params: {\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          name: this.searchQuery,\r\n          typeId: this.selectedType\r\n        }\r\n      }).then(res => {\r\n        if (res.code === '0') {\r\n          this.bookData = res.data.list;\r\n          this.total = res.data.total;\r\n        } else {\r\n          this.$message.error(res.msg);\r\n        }\r\n      });\r\n    },\r\n\r\n    handleCurrentChange(pageNum) {\r\n      this.pageNum = pageNum;\r\n      this.loadData();\r\n    },\r\n\r\n    viewBookDetail(book) {\r\n      // 这里可以跳转到图书详情页\r\n      console.log('查看图书详情:', book);\r\n      // 以对象形式传过去时，这段数据会因为route.query参数只支持字符串序列化导致对象数据丢失，即使初始化调用对象ID访问数据库也来不及\r\n      // 必须使用这种方法保留数据\r\n      this.$router.push({path:\"BookDetail\", query:{book:JSON.stringify(book)}});\r\n    },\r\n\r\n    resetSearch() {\r\n      this.searchQuery = '';\r\n      this.selectedType = null;\r\n      this.pageNum = 1;\r\n      this.loadData();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.book-container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.search-section {\r\n  background: #fff;\r\n  padding: 20px;\r\n  border-radius: 4px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,.1);\r\n}\r\n\r\n.search-box {\r\n  display: flex;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  margin-right: 10px;\r\n}\r\n\r\n.search-button {\r\n  width: 100px;\r\n}\r\n\r\n.filter-section {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.filter-title {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-right: 15px;\r\n  white-space: nowrap;\r\n}\r\n\r\n.filter-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.filter-tag {\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.filter-tag:hover {\r\n  opacity: 0.8;\r\n}\r\n\r\n.book-list {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.no-data {\r\n  text-align: center;\r\n  padding: 50px 0;\r\n  color: #999;\r\n  font-size: 16px;\r\n}\r\n\r\n.book-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\r\n  gap: 20px;\r\n}\r\n\r\n.book-card {\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,.1);\r\n  transition: all 0.3s;\r\n  cursor: pointer;\r\n}\r\n\r\n.book-card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 4px 12px rgba(0,0,0,.15);\r\n}\r\n\r\n.book-cover {\r\n  height: 240px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.cover-img {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.book-info {\r\n  padding: 12px;\r\n}\r\n\r\n.book-title {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #333;\r\n  margin-bottom: 6px;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n  height: 36px;\r\n}\r\n\r\n.book-author {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-bottom: 4px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.book-publisher {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-bottom: 8px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.book-price {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #e64545;\r\n}\r\n\r\n.pagination-section {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 20px 0;\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,.1);\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .book-container {\r\n    padding: 10px;\r\n  }\r\n\r\n  .book-grid {\r\n    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\r\n    gap: 15px;\r\n  }\r\n\r\n  .book-cover {\r\n    height: 180px;\r\n  }\r\n\r\n  .search-box {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .search-input {\r\n    margin-right: 0;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Book.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Book.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Book.vue?vue&type=template&id=03af279c&scoped=true\"\nimport script from \"./Book.vue?vue&type=script&lang=js\"\nexport * from \"./Book.vue?vue&type=script&lang=js\"\nimport style0 from \"./Book.vue?vue&type=style&index=0&id=03af279c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03af279c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","nativeOn","$event","type","indexOf","_k","keyCode","key","searchBooks","apply","arguments","model","value","searchQuery","callback","$$v","expression","on","_v","_l","typeData","id","selectedType","filterByType","_s","name","bookData","length","book","viewBookDetail","pic","defaultCover","author","publisher","price","total","pageNum","pageSize","handleCurrentChange","_e","staticRenderFns","data","require","created","loadData","loadTypeData","methods","request","get","params","typeId","then","res","code","list","$message","error","msg","console","log","$router","push","path","query","JSON","stringify","resetSearch","component"],"sourceRoot":""}