"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[295],{8295:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"top-card"},[t("div",{staticClass:"search"},[t("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入用户名","suffix-icon":"el-icon-search"},model:{value:e.search.username,callback:function(t){e.$set(e.search,"username",t)},expression:"search.username"}}),t("el-button",{staticClass:"search-button",attrs:{type:"primary",plain:""},on:{click:function(t){return e.loadData()}}},[e._v("搜索")]),t("el-button",{attrs:{type:"warning",plain:""},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1),t("div",{staticClass:"add-button"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("新增")])],1)]),t("el-card",[t("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},data:e.tableData}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),t("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("el-image",{staticClass:"table-img",attrs:{src:e.row.avatar,"preview-src-list":[e.row.avatar]}})]}}])}),t("el-table-column",{attrs:{prop:"username",label:"用户名"}}),t("el-table-column",{attrs:{prop:"password",label:"密码"}}),t("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),t("el-table-column",{attrs:{prop:"phone",label:"电话"}}),t("el-table-column",{attrs:{prop:"",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",icon:""},on:{click:function(t){return e.edit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.del(a.row.id)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"pagination-div"},[t("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-sizes":[5,10,20],"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"用户信息",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{staticClass:"dialog-form",attrs:{model:e.form,"label-position":"right","label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"密码"}},[t("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",{attrs:{label:"姓名"}},[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"邮箱"}},[t("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[t("el-radio",{attrs:{label:"男"}}),t("el-radio",{attrs:{label:"女"}})],1)],1),t("el-form-item",{attrs:{label:"年龄"}},[t("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),t("el-form-item",{attrs:{label:"电话"}},[t("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("el-form-item",{attrs:{label:"头像"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:9090/files/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.form.avatar?t("img",{staticClass:"avatar",attrs:{src:e.form.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)],1)],1)},s=[],r=a(5067),o={name:"User",data(){return{form:{},search:{},dialogVisible:!1,pageNum:1,pageSize:6,total:0,tableData:[]}},created(){this.loadData()},methods:{handleCurrentChange(e){this.pageNum=e,this.loadData()},loadData(){r.A.get("/user/selectPage",{params:{pageNum:this.pageNum,pageSize:this.pageSize,username:this.search.username}}).then(e=>{"0"==e.code?(this.tableData=e.data.list,this.total=e.data.total):this.$message.error(e.msg)})},reset(){this.search.username=null,this.loadData()},add(){this.form={},this.dialogVisible=!0},save(){this.form.id?r.A.post("/user/update",this.form).then(e=>{"0"===e.code?(this.$message.success("修改成功"),this.loadData(),this.dialogVisible=!1):this.$message.error(e.msg)}):r.A.post("/user/save",this.form).then(e=>{"0"===e.code?(this.$message.success("保存成功"),this.loadData(),this.dialogVisible=!1):this.$message.error(e.msg)})},del(e){this.$confirm("您确定删除吗？","确认删除",{type:"warning"}).then(t=>{r.A.delete("/user/delete/"+e).then(e=>{"0"===e.code?(this.$message.success("操作成功"),this.loadData()):this.$message.error(e.msg)})}).catch(()=>{})},edit(e){this.form={},this.form=e,this.dialogVisible=!0},handleAvatarSuccess(e){this.form.avatar=e.data,this.$forceUpdate()}}},i=o,n=a(1656),c=(0,n.A)(i,l,s,!1,null,null,null),u=c.exports}}]);
//# sourceMappingURL=295.d2fe96ae.js.map