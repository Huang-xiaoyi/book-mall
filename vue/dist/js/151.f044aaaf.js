"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[151],{909:function(t,e,a){t.exports=a.p+"img/carousel_2.a903101e.png"},3151:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"book-container"},[e("div",{staticClass:"search-section"},[e("div",{staticClass:"search-box"},[e("el-input",{staticClass:"search-input",attrs:{placeholder:"搜索图书...","suffix-icon":"el-icon-search"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchBooks.apply(null,arguments)}},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),e("el-button",{staticClass:"search-button",attrs:{type:"primary"},on:{click:t.searchBooks}},[t._v("搜索")])],1),e("div",{staticClass:"filter-section"},[e("div",{staticClass:"filter-title"},[t._v("分类筛选:")]),e("div",{staticClass:"filter-tags"},[t._l(t.typeData,function(a){return e("el-tag",{key:a.id,staticClass:"filter-tag",attrs:{type:t.selectedType===a.id?"primary":""},on:{click:function(e){return t.filterByType(a.id)}}},[t._v(" "+t._s(a.name)+" ")])}),e("el-tag",{staticClass:"filter-tag",attrs:{type:null===t.selectedType?"primary":""},on:{click:function(e){return t.filterByType(null)}}},[t._v(" 全部 ")])],2)])]),e("div",{staticClass:"book-list"},[0===t.bookData.length?e("div",{staticClass:"no-data"},[t._v(" 暂无图书数据 ")]):e("div",{staticClass:"book-grid"},t._l(t.bookData,function(a){return e("div",{key:a.id,staticClass:"book-card",on:{click:function(e){return t.viewBookDetail(a)}}},[e("div",{staticClass:"book-cover"},[e("img",{staticClass:"cover-img",attrs:{src:a.pic||t.defaultCover,alt:a.name}})]),e("div",{staticClass:"book-info"},[e("div",{staticClass:"book-title"},[t._v(t._s(a.name))]),e("div",{staticClass:"book-author"},[t._v(t._s(a.author))]),e("div",{staticClass:"book-publisher"},[t._v(t._s(a.publisher))]),e("div",{staticClass:"book-price"},[t._v("¥"+t._s(a.price))])])])}),0)]),t.total>0?e("div",{staticClass:"pagination-section"},[e("el-pagination",{attrs:{background:"","current-page":t.pageNum,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1):t._e()])},i=[],o=(a(4114),a(5067)),r={data(){return{bookData:[],typeData:[],searchQuery:"",selectedType:null,pageNum:1,pageSize:20,total:0,defaultCover:a(909)}},created(){this.loadData(),this.loadTypeData()},methods:{loadData(){o.A.get("/book/selectPage",{params:{pageNum:this.pageNum,pageSize:this.pageSize,name:this.searchQuery,typeId:this.selectedType}}).then(t=>{"0"===t.code?(this.bookData=t.data.list,this.total=t.data.total):this.$message.error(t.msg)})},loadTypeData(){o.A.get("/type/selectAll").then(t=>{"0"===t.code?this.typeData=t.data:this.$message.error(t.msg)})},searchBooks(){o.A.get("/book/search",{params:{pageNum:this.pageNum,pageSize:this.pageSize,name:this.searchQuery}}).then(t=>{"0"===t.code?(this.bookData=t.data.list,this.total=t.data.total):this.$message.error(t.msg)})},filterByType(t){this.selectedType=t,this.pageNum=1,o.A.get("/book/filterPage",{params:{pageNum:this.pageNum,pageSize:this.pageSize,name:this.searchQuery,typeId:this.selectedType}}).then(t=>{"0"===t.code?(this.bookData=t.data.list,this.total=t.data.total):this.$message.error(t.msg)})},handleCurrentChange(t){this.pageNum=t,this.loadData()},viewBookDetail(t){console.log("查看图书详情:",t),this.$router.push({path:"BookDetail",query:{book:JSON.stringify(t)}})},resetSearch(){this.searchQuery="",this.selectedType=null,this.pageNum=1,this.loadData()}}},l=r,c=a(1656),n=(0,c.A)(l,s,i,!1,null,"03af279c",null),u=n.exports}}]);
//# sourceMappingURL=151.f044aaaf.js.map