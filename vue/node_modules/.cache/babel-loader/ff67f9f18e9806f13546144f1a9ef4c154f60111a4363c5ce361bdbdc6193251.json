{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nVue.use(VueRouter);\nconst routes = [{\n  path: '/manage',\n  name: 'home',\n  component: () => import('../views/Manage.vue'),\n  redirect: '/home',\n  // 重定向到主页\n  children: [{\n    path: 'user',\n    name: 'User',\n    meta: {\n      name: '用户信息',\n      title: '用户信息'\n    },\n    component: () => import('../views/manage/User')\n  }, {\n    path: 'admin',\n    name: 'Admin',\n    meta: {\n      name: '管理员信息',\n      title: '管理员信息'\n    },\n    component: () => import('../views/manage/Admin')\n  }, {\n    path: 'notice',\n    name: 'Notice',\n    meta: {\n      name: '公告信息',\n      title: '公告信息'\n    },\n    component: () => import('../views/manage/Notice')\n  }, {\n    path: 'home',\n    name: 'Home',\n    meta: {\n      name: '首页',\n      title: '首页'\n    },\n    component: () => import('../views/manage/Home')\n  }, {\n    path: 'personInfo',\n    name: 'PersonInfo',\n    meta: {\n      name: '个人信息',\n      title: '个人信息'\n    },\n    component: () => import('../views/manage/PersonInfo')\n  }, {\n    path: 'password',\n    name: 'Password',\n    meta: {\n      name: '修改密码',\n      title: '修改密码'\n    },\n    component: () => import('../views/manage/Password')\n  }]\n}, {\n  path: '/front',\n  name: 'Front',\n  component: () => import('../views/Front.vue'),\n  children: [{\n    path: 'index',\n    name: 'Index',\n    meta: {\n      name: '系统首页',\n      title: '系统首页'\n    },\n    component: () => import('../views/front/Index')\n  }, {\n    path: 'notice',\n    name: 'Notice',\n    meta: {\n      name: '修改密码',\n      title: '修改密码'\n    },\n    component: () => import('../views/front/Notice')\n  }, {\n    path: 'center',\n    name: 'Center',\n    component: () => import('../views/front/Center.vue'),\n    redirect: '/front/center/userInfo',\n    children: [{\n      path: 'password',\n      name: 'Password',\n      meta: {\n        name: '修改密码',\n        title: '修改密码'\n      },\n      component: () => import('../views/front/center/Password.vue')\n    }, {\n      path: 'userInfo',\n      name: 'UserInfo',\n      meta: {\n        name: '个人信息',\n        title: '个人信息'\n      },\n      component: () => import('../views/front/center/UserInfo.vue')\n    }]\n  }]\n}, {\n  path: '/login',\n  name: 'Login',\n  component: () => import('../views/Login.vue'),\n  meta: {\n    title: '登录'\n  }\n}, {\n  path: '/register',\n  name: 'Register',\n  component: () => import('../views/Register.vue'),\n  meta: {\n    title: '注册'\n  }\n}];\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\nconst originalPush = VueRouter.prototype.push;\nVueRouter.prototype.push = function push(location) {\n  return originalPush.call(this, location).catch(err => err);\n};\n\n// 路由守卫\nrouter.beforeEach((to, from, next) => {\n  document.title = '网上书城';\n  if (to.path === '/') {\n    return next(\"/login\");\n  }\n  let user = JSON.parse(localStorage.getItem(\"userInfo\") || '{}');\n  //front有页面 打开下方的\n  if (to.path.includes(\"manage\") && user.role === 'user') {\n    next('/front/index');\n  }\n  if (to.path.includes(\"front\") && user.role != 'user') {\n    next('/manage/home');\n  }\n  if (to.path !== '/login' && to.path !== '/register' && to.path !== '/front/index') {\n    if (user == null || user == \"\") {\n      next(\"/login\");\n    }\n  }\n  next();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","use","routes","path","name","component","redirect","children","meta","title","router","mode","base","process","env","BASE_URL","originalPush","prototype","push","location","call","catch","err","beforeEach","to","from","next","document","user","JSON","parse","localStorage","getItem","includes","role"],"sources":["D:/project/book-mall/vue/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/manage',\n    name: 'home',\n    component: () => import('../views/Manage.vue'),\n    redirect: '/home',  // 重定向到主页\n    children:[\n      { path:'user',name:'User',meta: { name: '用户信息',title: '用户信息'  },component:() => import('../views/manage/User') },\n      { path:'admin',name:'Admin',meta: { name: '管理员信息',title: '管理员信息'},component:() => import('../views/manage/Admin') },\n      { path: 'notice', name: 'Notice', meta: { name: '公告信息' ,title: '公告信息'}, component: () => import('../views/manage/Notice') },\n      { path:'home',name:'Home',meta: { name: '首页' ,title: '首页'},component: () => import('../views/manage/Home')  },\n      { path: 'personInfo', name: 'PersonInfo', meta: { name: '个人信息',title: '个人信息' }, component: () => import('../views/manage/PersonInfo')  },\n      { path: 'password', name: 'Password', meta: { name: '修改密码',title: '修改密码' }, component:() => import('../views/manage/Password')  },\n    ]\n  },\n  {\n    path: '/front',\n    name: 'Front',\n    component: () => import('../views/Front.vue'),\n    children: [\n      { path: 'index', name: 'Index', meta: { name: '系统首页',title: '系统首页' }, component:() => import('../views/front/Index') },\n      { path: 'notice', name: 'Notice', meta: { name: '修改密码' ,title: '修改密码'}, component:() => import('../views/front/Notice')  },\n      { path: 'center',\n        name: 'Center',\n        component:() => import('../views/front/Center.vue'),\n        redirect: '/front/center/userInfo',\n        children: [\n          { path: 'password', name: 'Password', meta: { name: '修改密码' ,title: '修改密码'}, component:() => import('../views/front/center/Password.vue')  },\n          { path: 'userInfo', name: 'UserInfo', meta: { name: '个人信息' ,title: '个人信息'}, component:() => import('../views/front/center/UserInfo.vue')  },\n\n        ]\n      },\n    ]\n  },\n  {\n    path: '/login',\n    name: 'Login',\n    component: () => import('../views/Login.vue'),\n    meta: { title: '登录'  },\n  },\n  {\n    path: '/register',\n    name: 'Register',\n    component: () => import('../views/Register.vue'),\n    meta: { title: '注册'  },\n  }\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\nconst originalPush = VueRouter.prototype.push\nVueRouter.prototype.push = function push(location) {\n  return originalPush.call(this, location).catch(err => err)\n}\n\n// 路由守卫\nrouter.beforeEach((to ,from, next) => {\n  document.title = '网上书城';\n  if (to.path === '/') {\n    return next(\"/login\");\n  }\n  let user = JSON.parse(localStorage.getItem(\"userInfo\") || '{}');\n  //front有页面 打开下方的\n  if (to.path.includes(\"manage\")&&user.role==='user'){\n    next('/front/index')\n  }\n  if (to.path.includes(\"front\")&&user.role!='user'){\n    next('/manage/home')\n  }\n  if (  to.path !== '/login' && to.path !== '/register' && to.path !== '/front/index') {\n    if (user==null||user==\"\"){\n      next(\"/login\");}\n  }\n  next();\n})\nexport default router\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}